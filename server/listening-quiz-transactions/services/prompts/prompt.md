# TOEIC問題生成プロンプト

TOEICリスニング Part{{sectionNumber}} の練習問題を{{requestedNumOfQuizs}}問生成してください。

## Part{{sectionNumber}} 仕様

- **問題形式**: {{spec.description}}
- **出題方法**: {{spec.format}}
- **要件**: {{spec.requirements}}

{{speakerAccentAndPatternList}}

## 生成要件

### audioScript（音声読み上げ内容）の構成

#### Part 1の場合:
- 4つの選択肢のみを連続して読み上げ
- 各選択肢の前に「A」「B」「C」「D」は付けない
- **各選択肢の間には[短い間]を挿入**
- **例**: "A man is reading a newspaper. [短い間] Two women are walking. [短い間] Children are playing in the park. [短い間] A dog is running."

#### Part 2の場合:
- 質問文 + **[間]** + 3つの選択肢を連続して読み上げ
- **質問文と選択肢は異なる話者が担当**
- **質問文**: [Speaker1]が読み上げ
- **選択肢**: [Speaker2]が読み上げ
- 選択肢の前に「A」「B」「C」は付けない
- **各選択肢の間には[短い間]を挿入**
- **例**: "[Speaker1] Where is the meeting room? [間] [Speaker2] Down the hallway to your right. [短い間] Yes, I'll attend the meeting. [短い間] The meeting starts at 3 PM."

#### Part 3の場合:
- 会話文 + **[間]** + 設問文 + **[間]** + 4つの選択肢を連続して読み上げ
- **複数の話者がいる場合は各発言に話者識別タグを挿入**
- **話者交代時と各選択肢の間には適切な間隔を挿入**
- **話者タグ形式**: [Speaker1], [Speaker2], [Speaker3] など
- **設問文と選択肢**: ナレーター（話者タグなし）が読み上げ
- **例**: "[Speaker1] Good morning, Sarah. Did you finish the quarterly report? [間] [Speaker2] Almost done, Mike. I just need to add the sales figures. [間] [Speaker1] Great, we need to submit it by noon today. [間] What does Mike need to do? [間] Add the sales figures. [短い間] Submit the report. [短い間] Schedule a meeting. [短い間] Review the data."

#### Part 4の場合:
- アナウンス、プレゼンテーション、広告などの形式
- トーク内容 + **[間]** + 設問文 + **[間]** + 4つの選択肢を連続して読み上げ
- **トーク内容と設問・選択肢は異なる話者が担当**
- **トーク内容**: [Speaker1]が読み上げ
- **設問文と選択肢**: [Speaker2]が読み上げ
- **各選択肢の間には[短い間]を挿入**
- **例**: "[Speaker1] Welcome to City Bank. We are pleased to announce our new mobile banking service. Starting next month, you can access your account anytime, anywhere. [間] [Speaker2] What is the main topic of this announcement? [間] A new mobile banking service. [短い間] A branch opening. [短い間] A customer survey. [短い間] A system maintenance."

#### 話者識別ルール
- **Part 2**: 質問文[Speaker1] → 選択肢[Speaker2]
- **Part 3**: 会話[Speaker1, Speaker2, Speaker3] → 設問・選択肢（ナレーター）
- **Part 4**: トーク[Speaker1] → 設問・選択肢[Speaker2]
- **最大話者数**: 3名まで（[Speaker1], [Speaker2], [Speaker3]）

#### 間隔挿入の必須ルール
- **トーク終了後**: [間]
- **設問文終了後**: [間] 
- **各選択肢の後**: [短い間]（最後の選択肢除く）
- **Part 2質問後**: [間]
- **Part 3会話の話者交代**: [間]

### その他の生成項目

- **jpnAudioScript**: audioScriptの日本語訳（必須・以下の形式で構成）
  - **Part 1の場合**: "選択肢: A. [選択肢1の日本語] B. [選択肢2の日本語] C. [選択肢3の日本語] D. [選択肢4の日本語]"
  - **Part 2の場合**: "質問文: [質問の日本語] 選択肢: A. [選択肢1の日本語] B. [選択肢2の日本語] C. [選択肢3の日本語]"
  - **Part 3の場合**: "会話文: [会話の日本語] 設問文: [設問の日本語] 選択肢: A. [選択肢1の日本語] B. [選択肢2の日本語] C. [選択肢3の日本語] D. [選択肢4の日本語]"
  - **Part 4の場合**: "トーク内容: [トークの日本語] 設問文: [設問の日本語] 選択肢: A. [選択肢1の日本語] B. [選択肢2の日本語] C. [選択肢3の日本語] D. [選択肢4の日本語]"
- **answerOption**: 正解選択肢（Part1,3,4の場合は"A", "B", "C", "D"のいずれか。Part2の場合だけ"A", "B", "C"のいずれか）（必須）
- **sectionNumber**: 問題のセクション番号。Part1,2,3,4のいずれか（必須）
- **explanation**: 詳細解説（必須・以下の要素を含む）
  - **正解の根拠**: なぜその選択肢が正解なのかの明確な理由
  - **不正解選択肢の分析**: 他の選択肢がなぜ間違いなのかの説明
  - **語彙・文法のポイント**: 問題で使用された重要な語彙や文法事項の解説
  - **発音・リスニングのコツ**: 音の変化、リンキング、弱音等の聞き取りポイント
  - **アクセント特有の表現**: 指定されたアクセントの語彙・表現・発音特徴の学習ポイント
  - **類似問題への応用**: 同じパターンの問題を解くためのコツやポイント
- **speakerAccent**: 各問題ごとに指定されたアクセント

## 多様性要件（必須）

### 動的多様性要件
- **1問の場合**: 制限なし
- **2問の場合**: 異なるジャンル2種類
- **3問の場合**: 異なるジャンル3種類  
- **4問の場合**: 異なるジャンル4種類
- **5問以上の場合**: 最低5種類の異なるジャンルを含む

### Part別対応ジャンル（必須選択肢）

#### Part 1の場合：
1. **職場シーン**: オフィス、会議室、工場での人物描写
2. **交通・移動**: 駅、空港、バス停、道路での場面
3. **商業施設**: 店舗、レストラン、銀行での活動
4. **屋外活動**: 公園、建設現場、イベント会場
5. **日常生活**: 家庭、病院、学校での様子

#### Part 2の場合：
1. **業務確認**: スケジュール、タスク、進捗に関する質問
2. **場所・方向**: 位置、道順、施設に関する質問
3. **提案・依頼**: 協力、参加、変更に関する質問
4. **情報確認**: 時間、費用、条件に関する質問
5. **意見・評価**: 感想、判断、選択に関する質問

#### Part 3の場合：
1. **ビジネス会話**: 会議、商談、プロジェクト相談
2. **顧客対応**: 苦情処理、注文、予約、問い合わせ
3. **同僚間対話**: 協力、情報共有、スケジュール調整
4. **サービス利用**: 修理依頼、予約変更、相談
5. **学術・研修**: 講義、セミナー、研究に関する会話

#### Part 4の場合：
1. **アナウンス**: 交通機関、施設、緊急事態
2. **広告**: 商品、サービス、イベント宣伝
3. **会議・プレゼン**: ビジネス報告、企画提案
4. **講演**: 学術、研修、セミナー
5. **レポート**: ニュース、調査結果、進捗報告
6. **説明**: 手順、ルール、システム解説
7. **インタビュー**: 専門家、経験者への質問
8. **案内**: 施設、イベント、サービスガイド

### 設定の多様性
- **場所**: オフィス、空港、病院、大学、工場、ホテル、銀行、研究所
- **話者**: 管理職、専門家、案内係、講師、記者、医師
- **状況**: 定例、緊急、変更、新規、廃止、改善

### 重複回避ルール
- **同一ジャンル**: 最大2問まで（10問の場合）
- **同一設定**: 同じ場所は最大1問
- **同一パターン**: 似た構造の問題は連続禁止

## 難易度要件（TOEIC 600-990点レベル）

### 難易度設定
- **難易度設定**: 初級-最上級分散（500-990点）

### 間接的表現の使用
- **直接的表現禁止**: 答えをそのまま言わない
- **推論要素**: 文脈から判断が必要な設問
- **暗示的情報**: "We might consider..." "It would be advisable..." などの表現

### 複雑な語彙・文法
- **専門用語**: 各分野の業界用語を適切に使用
- **同義語・類義語**: 混乱を招く似た意味の語彙
- **複合時制**: 過去完了、未来完了、仮定法過去
- **分詞構文**: Having completed, Being unable to など

### 紛らわしい選択肢
- **部分的正解**: 一部は正しいが全体として間違い
- **文脈のずれ**: 関連があるが質問に対応しない
- **数値・日時の混乱**: 似た数字や日付での引っかけ

## 単語数制約（必須遵守）

### Part 1の場合：
- **各選択肢**: 4-10語
- **audioScript全体**: 20-40語

### Part 2の場合：
- **質問文**: 5-12語
- **各選択肢**: 3-10語
- **audioScript全体**: 20-50語

### Part 3の場合：
- **会話部分**: 60-100語
- **質問文**: 8-12語
- **各選択肢**: 3-8語
- **audioScript全体**: 110-180語

### Part 4の場合：
- **トーク部分**: 80-120語
- **質問文**: 8-12語
- **各選択肢**: 3-8語
- **audioScript全体**: 130-200語

## 正解分散の必須要件（絶対遵守）

5問生成の場合の正解分布例：
- 問題1: answerOption: "B"
- 問題2: answerOption: "D" 
- 問題3: answerOption: "A"
- 問題4: answerOption: "C"
- 問題5: answerOption: "B"

重要: 全問題のanswerOptionを単一の選択肢（"A" | "B" | "C" | "D"）に極端に偏らせることは絶対に禁止

## 選択肢作成手順（必須）

1. まず正解となる内容を決定
2. その正解をA、B、C、Dのいずれかの位置にランダム配置
3. 他の位置に不正解選択肢を配置
4. audioScriptではA→B→C→Dの順序で読み上げ
5. answerOptionで実際の正解位置を指定

例：正解が「道路閉鎖」の場合
- A位置: 新しいバス路線 (不正解)
- B位置: 道路閉鎖 (正解) ← answerOption: "B"
- C位置: 列車変更 (不正解)  
- D位置: 天気警報 (不正解)

## 出力形式

必ずJSON形式で以下の構造で回答してください：

{{outputFormat}}

## 重要な注意事項

1. **正解選択肢の配置**: 正解は A、B、C、(D) のいずれかにランダムに配置し、全問題でバランスよく分散させる
2. **audioScript内での選択肢の順序**: 必ずA→B→C→(D)の順序で音声内容を構成（正解位置に関係なく、常にこの順序で読み上げ）
3. **選択肢ラベルの省略**: audioScript内では「A」「B」「C」「D」のラベルは読み上げない
4. **適切な間の配置**: 文と文の間、質問と回答の間に自然な間を想定した構成
5. **Part別のaudioScript構成の遵守**: 各PartのaudioScript構成ルールを厳密に守る
6. **正解分散の指針**: 複数問題生成時は、A、B、C、(D)の正解がほぼ均等に分布するよう調整

## 絶対禁止事項
❌ 全問題のanswerOptionを単一の選択肢（"A" | "B" | "C" | "D"）に極端に偏らせること
❌ 同じ選択肢が3問以上連続すること
❌ {"questions": [...]} のような形式を使用すること
❌ リクエスト制限を超える問題数を生成すること
❌ 不正なsectionNumberでの問題生成
❌ Markdownコードブロック（```json）の使用
✅ 各選択肢（A、B、C、D）をバランスよく分散させること
✅ 各問題で異なる位置に正解を配置すること
✅ 配列を直接返すこと
✅ 純粋なJSONのみを出力

## 正解分散の強制ルール
- **10問の場合**: 各選択肢は2-3問まで（A:3, B:3, C:2, D:2 のような分散）
- **9問の場合**: 各選択肢は2-3問まで
- **8問の場合**: 各選択肢は最大2問まで
- **7問の場合**: 各選択肢は最大2問まで
- **6問の場合**: 各選択肢は最大2問まで
- **5問の場合**: 各選択肢は最大2問まで
- **4問の場合**: 各選択肢は最大2問まで
- **3問の場合**: 各選択肢は最大2問まで
- **2問の場合**: 各選択肢は最大1問まで
- **1問の場合**: 制限なし
- **Part2（3選択肢）の場合**: 各選択肢（A、B、C）は上記ルールに準拠

## 品質基準

### 問題内容の品質基準
- **難易度**: TOEIC公式問題集レベル（600-990点相当）
- **語彙レベル**: 中級~上級ビジネス英語、日常会話、アカデミック語彙を適切に配分
- **文法事項**: 時制、仮定法、関係詞、分詞構文等の実用的文法を自然に組み込み
- **文脈の一貫性**: 話者、場面、状況設定に矛盾がなく、リアルなシチュエーション

### Part別品質要件
- **Part 1**: 写真描写として自然で、視覚的に判断可能な明確な違いがある選択肢
- **Part 2**: 質問と応答の自然な会話の流れ、適切な応答パターンの多様性
- **Part 3**: ビジネス・日常場面のリアルな会話、情報が適切に分散された設問
- **Part 4**: 実際のアナウンス・プレゼンテーションに近い構成と情報密度

### 選択肢の品質基準
- **紛らわしさ**: 実際のTOEIC試験レベルの巧妙な引っかけ要素
- **誤答選択肢**: 単なるでたらめではなく、学習者が間違えやすい合理的な理由のある選択肢
- **語彙の重複回避**: 正解に直結する単語の重複は避け、文脈理解を重視
- **長さのバランス**: 選択肢の長さが正解を示唆しないよう適切に調整

### アクセント別要件
- **発音特徴の反映**: 各アクセントの音韻的特徴を語彙・表現選択に自然に反映
- **語彙の地域性**: アメリカ「elevator」、イギリス「lift」等の地域的語彙を適切に使用
- **表現パターン**: 各地域の慣用表現、丁寧さのレベル、会話パターンを反映
- **発音指導要素**: 学習者が各アクセントの特徴を理解できる要素を含む

### explanation品質基準
- **学習者のレベル向上に直結する実用的な解説**
- **単なる正解発表ではなく、英語力向上のための具体的指導**
- **TOEIC対策として実践で活用できる解法テクニック**
- **200-300文字程度の適切な分量での簡潔かつ充実した内容**

### 総合的品質要件
- **実用性**: 実際のビジネス・学術・日常場面で遭遇する可能性の高い内容
- **教育効果**: 解答後に学習者の英語力向上に寄与する学習要素
- **文化的適切性**: 各英語圏の文化的背景を適切に反映した内容
- **時代性**: 現代的な状況・技術・社会情勢を反映した設定

## 絶対遵守事項（最重要）
1. レスポンスの最初の文字は必ず「[」
2. レスポンスの最後の文字は必ず「]」
3. {"questions": [...]} のような形式は絶対に禁止
4. 配列を直接返す
5. Markdownコードブロック（```json）は使用禁止
6. 純粋なJSONのみを出力

正しい例: [{"audioScript": "..."}]
間違った例: {"questions": [{"audioScript": "..."}]}
間違った例: ```json [{"audioScript": "..."}] ```